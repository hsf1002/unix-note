### 第十七章  高级进程间通信

##### UNIX域套接字

可以在同一计算机系统上的两个进程之间传送打开的文件描述符，服务进程可以使他们的打开文件描述符和指定的名字相关联，客户进程可以使用这些名字与服务进程汇聚。虽然因特网域套接字也可实现同一目的，但是UNIX域套接字效率更高，它仅仅复制数据，并不执行协议处理，不需要添加或删除网络报头，无需计算检验和，不产生顺序号，不发送确认报文，它更像是套接字和管道的结合。提供数据报和流两种接口，数据报服务时可靠的，既不会丢失报文也不会传递出错

创建一对无命名的，互相连接的UNIX域套接字：

```
#include <sys/socket.h>
 
int socketpair(int domain, int type, int protocol, int fd[2]);
// 返回值：若成功，返回0，若出错，返回-1
```

一般来说，接口只对UNIX域提供支持，与实现有关，一对互相连接的UNIX域套接字可以起到全双工管道的作用，两端对读和写开放

##### 唯一连接

服务器进程可以使用标准的bind、listen、accept来为客户进程安排一个唯一的UNIX域连接，客户进程使用connect与服务进程进行连接，连接成功后服务进程和客户进程之间就存在了唯一连接，这和因特网域套接字操作相同

serv_listen：监听客户进程的连接请求

serv_accept：等待客户进程连接请求的到达

cli_conn：连接到服务器进程，客户进程指定的name必须与服务器进程调用的serv_listen中的名字相同